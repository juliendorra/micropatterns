:root {


    /* Memphis Milano Inspired Palette - Vibrant & Bold */
    --primary-color: #FF5252;
    /* Vibrant Red */
    --secondary-color: #4FC3F7;
    /* Light Blue */
    --accent-color-yellow: #FFEB3B;
    /* Bright Yellow */
    --accent-color-blue: #304FFE;
    /* Deep Blue */
    --accent-color-green: #4CAF50;
    /* Green */
    --accent-color-purple: #9C27B0;
    /* Adding Memphis Purple */
    --accent-color-orange: #FF9800;
    /* Adding Memphis Orange */

    --text-color: #212121;
    a
    /* Near Black for text */
    --text-color-light: #FFFFFF;
    /* White for text on dark backgrounds */

    --bg-color: #F5F5F5;
    /* Light Gray background */
    --bg-color-alt: #FFFFFF;
    /* White for cards/panels */
    --bg-confetti: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='%23000000' d='M10,10 L15,10 L15,15 L10,15 Z'/%3E%3Cpath fill='%23000000' d='M30,10 L35,10 L35,15 L30,15 Z'/%3E%3Cpath fill='%23000000' d='M50,10 L55,10 L55,15 L50,15 Z'/%3E%3Cpath fill='%23000000' d='M70,10 L75,10 L75,15 L70,15 Z'/%3E%3Cpath fill='%23000000' d='M90,10 L95,10 L95,15 L90,15 Z'/%3E%3Cpath fill='%23000000' d='M20,20 L25,20 L25,25 L20,25 Z'/%3E%3Cpath fill='%23000000' d='M40,20 L45,20 L45,25 L40,25 Z'/%3E%3Cpath fill='%23000000' d='M60,20 L65,20 L65,25 L60,25 Z'/%3E%3Cpath fill='%23000000' d='M80,20 L85,20 L85,25 L80,25 Z'/%3E%3Cpath fill='%23000000' d='M10,30 L15,30 L15,35 L10,35 Z'/%3E%3Cpath fill='%23000000' d='M30,30 L35,30 L35,35 L30,35 Z'/%3E%3Cpath fill='%23000000' d='M50,30 L55,30 L55,35 L50,35 Z'/%3E%3Cpath fill='%23000000' d='M70,30 L75,30 L75,35 L70,35 Z'/%3E%3Cpath fill='%23000000' d='M90,30 L95,30 L95,35 L90,35 Z'/%3E%3C/svg%3E");

    --border-color: #212121;
    /* Near Black bold borders */
    --border-color-light: #E0E0E0;
    /* Light Gray subtle borders */

    --error-color-fg: #FFFFFF;
    --error-color-bg: #D32F2F;
    /* Strong red */
    --success-color-fg: #212121;
    --success-color-bg: #B2FF59;
    /* Light Green */

    --font-family-sans-serif: "Helvetica Neue", Arial, sans-serif;
    --font-family-monospace: "SF Mono", Menlo, Monaco, Consolas, monospace;

    /* Memphis Design inspired shadow and shape features */
    --shadow-strong: 4px 4px 0px var(--border-color);
    --shadow-soft: 3px 3px 10px rgba(0, 0, 0, 0.15);
    --border-radius-sharp: 0px;
    /* Memphis often uses 90Â° angles */
    --border-radius-soft: 4px;
    /* Only slight rounding when needed */
    --border-radius-asymmetric: 0 12px 0 24px;
    /* Asymmetric corner rounding */

    /* Memphis zigzag pattern */
    --zigzag-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='20' viewBox='0 0 120 20'%3E%3Cpath fill='%23FF9800' d='M0,0 L10,10 L0,20 L10,20 L20,10 L10,0 Z'/%3E%3Cpath fill='%234FC3F7' d='M10,0 L20,10 L10,20 L20,20 L30,10 L20,0 Z'/%3E%3Cpath fill='%23FF5252' d='M20,0 L30,10 L20,20 L30,20 L40,10 L30,0 Z'/%3E%3Cpath fill='%239C27B0' d='M30,0 L40,10 L30,20 L40,20 L50,10 L40,0 Z'/%3E%3Cpath fill='%234CAF50' d='M40,0 L50,10 L40,20 L50,20 L60,10 L50,0 Z'/%3E%3Cpath fill='%23FFEB3B' d='M50,0 L60,10 L50,20 L60,20 L70,10 L60,0 Z'/%3E%3Cpath fill='%23FF9800' d='M60,0 L70,10 L60,20 L70,20 L80,10 L70,0 Z'/%3E%3Cpath fill='%234FC3F7' d='M70,0 L80,10 L70,20 L80,20 L90,10 L80,0 Z'/%3E%3Cpath fill='%23FF5252' d='M80,0 L90,10 L80,20 L90,20 L100,10 L90,0 Z'/%3E%3Cpath fill='%239C27B0' d='M90,0 L100,10 L90,20 L100,20 L110,10 L100,0 Z'/%3E%3Cpath fill='%234CAF50' d='M100,0 L110,10 L100,20 L110,20 L120,10 L110,0 Z'/%3E%3C/svg%3E");

    /* Lightning pattern for background accents */
    --lightning-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cpath fill='%23FF9800' stroke='%23FF5252' stroke-width='2' d='M60,20 L30,100 L70,100 L40,180'/%3E%3Cpath fill='%23FF9800' stroke='%23FF5252' stroke-width='2' d='M140,30 L110,110 L150,110 L120,190'/%3E%3Cpath fill='%23FF9800' stroke='%23FF5252' stroke-width='2' d='M100,10 L70,90 L110,90 L80,170'/%3E%3C/svg%3E");

    /* Dotted grid pattern */
    --dots-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Ccircle cx='3' cy='3' r='2' fill='%23212121'/%3E%3Ccircle cx='13' cy='13' r='2' fill='%23212121'/%3E%3C/svg%3E");

    /* ---------------*/

    /* Memphis Milano Inspired Palette - Bolder and More Diverse */
    --memphis-red: #FF3D3D;
    /* Slightly more intense red */
    --memphis-yellow: #FFEA00;
    /* Bright, pure yellow */
    --memphis-blue: #00B0FF;
    /* Vibrant sky blue */
    --memphis-deep-blue: #2962FF;
    /* Stronger deep blue */
    --memphis-green: #00C853;
    /* Lively green */
    --memphis-pink: #E91E63;
    /* Hot pink */
    --memphis-teal: #00BFA5;
    /* Teal */
    --memphis-orange: #FF6D00;
    /* Bright orange */
    --memphis-purple: #AA00FF;
    /* Vibrant purple */
    --memphis-black: #101010;
    /* Very dark black */
    --memphis-white: #FFFFFF;
    --memphis-light-gray: #EAEAEA;
    /* Lighter gray for backgrounds */
    --memphis-medium-gray: #BDBDBD;
    /* For borders or muted elements */
    --memphis-dark-gray: #333333;
    /* Dark gray for text or accents */

    /* Assigning to semantic variables */
    --primary-color: var(--memphis-red);
    --secondary-color: var(--memphis-blue);
    --accent-color-yellow: var(--memphis-yellow);
    --accent-color-blue: var(--memphis-deep-blue);
    --accent-color-green: var(--memphis-green);
    --accent-color-pink: var(--memphis-pink);
    --accent-color-teal: var(--memphis-teal);
    --accent-color-orange: var(--memphis-orange);
    --accent-color-purple: var(--memphis-purple);


    --text-color: var(--memphis-black);
    --text-color-light: var(--memphis-white);

    --bg-color: var(--memphis-light-gray);
    /* Base background with a pattern */
    --bg-color-alt: var(--memphis-white);
    /* Cards */

    --border-color: var(--memphis-black);
    --border-color-light: var(--memphis-medium-gray);

    --error-color-fg: var(--memphis-white);
    --error-color-bg: var(--memphis-red);
    --success-color-fg: var(--memphis-black);
    --success-color-bg: #A5D6A7;
    /* Softer green */

    /* Bolder, more graphic fonts often seen in Memphis style */
    --font-family-sans-serif: "Impact", "Arial Black", Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "sans-serif";
    --font-family-monospace: "Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace;

    /* Stronger shadows and sharp corners */
    --shadow-strong: 6px 6px 0px var(--border-color);
    --shadow-medium: 4px 4px 0px var(--border-color);
    --shadow-subtle: 2px 2px 0px var(--border-color);
    --border-radius-sharp: 0px;
    --border-radius-slight: 3px;
    /* Minimal rounding for some elements if needed */
    --border-radius-asymmetric: 0 10px 0 25px;
    /* More pronounced asymmetry */

    /* SVG Patterns - Encoded for CSS */
    --memphis-pattern-bacteria: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50'%3E%3Crect width='50' height='50' fill='%23FFFFFF'/%3E%3Cpath d='M0 5 C 10 0, 15 0, 25 5 S 30 10, 40 8 M5 15 C 15 10, 20 20, 30 18 S 40 10, 45 12 M0 25 C 10 20, 15 30, 25 28 S 35 20, 45 22 M5 35 C 15 30, 20 40, 30 38 S 40 30, 50 32 M0 45 C 10 40, 15 50, 25 48 S 35 40, 45 42' stroke='%23101010' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    --memphis-pattern-speckles: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Crect width='80' height='80' fill='%23EAEAEA'/%3E%3Ccircle cx='15' cy='15' r='3' fill='%23FF3D3D'/%3E%3Ccircle cx='40' cy='10' r='2.5' fill='%2300B0FF'/%3E%3Ccircle cx='60' cy='30' r='3.5' fill='%23FFEA00'/%3E%3Ccircle cx='20' cy='40' r='2' fill='%232962FF'/%3E%3Ccircle cx='30' cy='60' r='3' fill='%2300C853'/%3E%3Ccircle cx='10' cy='65' r='2.5' fill='%23E91E63'/%3E%3Crect x='50' y='50' width='6' height='5' fill='%23FF6D00' transform='rotate(30 53 52.5)'/%3E%3Crect x='65' y='15' width='5' height='7' fill='%2300BFA5' transform='rotate(-25 67.5 18.5)'/%3E%3Cpath d='M5 25 L10 30 L5 35 Z' fill='%23AA00FF'/%3E%3C/svg%3E");
    --memphis-pattern-confetti: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFFFFF'/%3E%3Ccircle cx='20' cy='20' r='12' fill='%23FFEA00'/%3E%3Crect x='60' y='15' width='28' height='20' fill='%2300B0FF' transform='rotate(20 74 25)' stroke='%23101010' stroke-width='2'/%3E%3Cpath d='M15 75 L30 50 L45 75 Z' fill='%23FF3D3D' stroke='%23101010' stroke-width='2'/%3E%3Cpath d='M50 60 Q 65 40 80 60 T 95 60' stroke='%2300C853' stroke-width='6' fill='none' stroke-linecap='round'/%3E%3Crect x='70' y='70' width='15' height='15' fill='%232962FF' stroke='%23101010' stroke-width='2'/%3E%3Ccircle cx='40' cy='40' r='5' fill='%23101010'/%3E%3Ccircle cx='75' cy='45' r='6' fill='%23E91E63' stroke='%23101010' stroke-width='1.5'/%3E%3Cellipse cx='50' cy='90' rx='12' ry='6' fill='%2300BFA5' stroke='%23101010' stroke-width='2'/%3E%3Cpath d='M5 5 L15 15 L5 15 Z' fill='%23AA00FF'/%3E%3C/svg%3E");
    --memphis-pattern-stripes-diag: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Crect width='20' height='20' fill='%23FFFFFF'/%3E%3Cpath d='M-2 2 L2 -2 M-2 12 L12 -2 M-2 22 L22 -2 M8 22 L22 8 M18 22 L22 18' stroke='%23101010' stroke-width='4'/%3E%3C/svg%3E");
}

body {
    font-family: var(--font-family-sans-serif);
    display: flex;
    gap: 50px;
    padding: 30px;
    padding-top: 42px;
    /* Account for fixed body::before height + border */
    background-color: var(--bg-color);
    background-image: var(--memphis-pattern-speckles);
    color: var(--text-color);
    margin: 0;
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
}

.column {
    display: flex;
    flex-direction: column;
    gap: 30px;
}

.column:first-child {
    flex-grow: 0;
    flex-shrink: 0;
}

.column:last-child {
    flex: 1;
    /* Takes remaining space */
}


h2,
h3 {
    /* color: var(--text-color); // Color will be set by specific h2/h3 rules or inherited */
    margin-top: 0;
    margin-bottom: 1.2rem;
    /* H2 will override this with 2rem, H3 will use this */
    font-weight: 900;
    /* text-transform: uppercase; will be handled by H2 specific rule */
    letter-spacing: 1px;
}

h2 {
    font-size: 2rem;
    padding: 1rem 2rem;
    padding-bottom: 0;
    border: 3px solid var(--border-color);
    position: relative;
    z-index: 1;
    margin-bottom: 2rem;
    background-color: var(--accent-color-purple);
    color: var(--text-color-light);
    display: inline-block;
    box-shadow: var(--shadow-strong);
    text-transform: uppercase;

}

h2::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 8px;
    width: 100%;
    height: 100%;
    background-color: var(--accent-color-blue);
    z-index: -1;
    border: 3px solid var(--border-color);
}

h2::after {
    content: '';
    position: absolute;
    bottom: -12px;
    right: -12px;
    width: 24px;
    height: 24px;
    background-color: var(--accent-color-yellow);
    border: 2px solid var(--border-color);
    transform: rotate(45deg);
    z-index: -1;
}


h3 {
    font-size: 1.4rem;
    color: var(--primary-color);
    position: relative;
    margin-bottom: 1.2rem;
    background-color: rgba(255, 255, 255, 0.80);
    width: max-content;

}

h3::before {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 40px;
    height: 6px;
    background-color: var(--accent-color-blue);
    z-index: 1;
}

h3::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 30px;
    width: 30px;
    height: 6px;
    background-color: var(--accent-color-green);
    z-index: 1;
}

#displayCanvas {
    /* border: 5px solid var(--border-color); */
    image-rendering: pixelated;
    max-width: 100%;
    background-color: var(--memphis-white);
    box-shadow: var(--shadow-strong);
    border-radius: var(--border-radius-slight);
    align-self: center;

}

label {
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 0.8px;
    background-color: var(--memphis-white);
    color: var(--text-color) !important;
    text-shadow: none !important;
    padding: 6px 12px;
    border: 3px solid var(--border-color);
    border-radius: var(--border-radius-slight);
    box-shadow: var(--shadow-subtle);
    display: inline-block;
    line-height: 1.3;
    /* margin-bottom: 0.2rem; */
    position: relative;
    z-index: 1;
    transform: rotate(-5deg);
    bottom: 0.5rem;

}

input[type="number"],
input[type="text"],
select {
    padding: 0.4rem 1rem;
    font-weight: 700;
    font-size: 0.9rem;
    border: 4px solid var(--border-color);
    border-radius: var(--border-radius-sharp);
    transition: all 0.15s ease-in-out;
    box-sizing: border-box;
    background-color: var(--memphis-white);
    color: var(--text-color);
    font-family: var(--font-family-monospace);
    height: 3.2rem;
}

input[type="number"]:focus,
input[type="text"]:focus,
select:focus {
    border-color: var(--accent-color-pink);
    outline: 0;
    box-shadow: 0 0 0 4px rgba(233, 30, 99, 0.4);
    background-color: #fff;
}

input[type="number"] {
    width: 90px;
}

select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23101010' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M2 5l6 6 6-6'/%3e%3cpath fill='none' stroke='%23FFEA00' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M2 8l6 6 6-6' style='transform: translateY(-3px);'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 30px 45px;
    padding-right: 3.5rem;
}

button {
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    font-weight: 900;
    color: var(--text-color-light);
    background-color: var(--primary-color);
    border: 4px solid var(--border-color);
    border-radius: var(--border-radius-slight);
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s, background-color 0.1s;
    text-align: center;
    box-shadow: var(--shadow-medium);
    text-transform: uppercase;
    position: relative;
    letter-spacing: 1.5px;
    overflow: hidden;
}

button::before {
    content: "";
    position: absolute;
    top: -5px;
    left: -5px;
    width: 20px;
    height: 20px;
    background-color: var(--accent-color-yellow);
    border: 3px solid var(--border-color);
    transform: rotate(45deg);
    z-index: 0;
    opacity: 0.7;
}

button span {
    position: relative;
    z-index: 1;
}


button:hover {
    background-color: var(--accent-color-orange);
    transform: translateY(-3px) translateX(-3px);
    box-shadow: 8px 8px 0px var(--border-color);
}

button:active {
    background-color: var(--memphis-pink);
    transform: translateY(1px) translateX(1px);
    box-shadow: 2px 2px 0px var(--border-color);
}

button:disabled {
    background-color: var(--memphis-medium-gray);
    border-color: var(--memphis-dark-gray);
    color: var(--memphis-dark-gray);
    opacity: 0.6;
    cursor: not-allowed;
    box-shadow: var(--shadow-subtle);
}

button.secondary {
    background-color: var(--accent-color-teal);
    color: var(--text-color-light);
}

button.secondary::before {
    background-color: var(--memphis-pink);
}

button.secondary:hover {
    background-color: var(--accent-color-green);
}

button.secondary:active {
    background-color: var(--accent-color-blue);
}

#errorLog {
    color: var(--text-color);
    background-color: var(--memphis-yellow);
    background-image: var(--memphis-pattern-stripes-diag);
    border: 4px solid var(--border-color);
    font-size: 0.9em;
    font-family: var(--font-family-monospace);
    white-space: pre-wrap;
    max-height: 200px;
    overflow-y: auto;
    padding: 1rem 1.5rem;
    margin-top: 15px;
    border-radius: var(--border-radius-sharp);
    box-shadow: var(--shadow-medium);
    width: 50vw;
    /* Match the width of the CodeMirror editor */
    box-sizing: border-box;
    /* Include padding and border in the width */
}

/* Remove background image when error log has content for better readability */
#errorLog:not(:empty) {
    background-image: none;
    background-color: var(--error-color-bg);
    color: var(--error-color-fg);
    font-weight: 600;
    max-height: min-content;
}

.controls-group {
    background-color: var(--memphis-white);
    background-image: var(--memphis-pattern-bacteria);
    border: 4px solid var(--border-color);
    padding: 25px;
    border-radius: var(--border-radius-asymmetric);
    box-shadow: var(--shadow-strong);
    position: relative;
    margin-bottom: 40px;
    width: 25vw;
    min-width: min-content;
    align-self: center;

}

.controls-group.alt-pattern {
    background-image: var(--memphis-pattern-confetti);
    border-color: var(--accent-color-pink);
    box-shadow: 6px 6px 0 var(--accent-color-pink);
}

.controls-group.alt-pattern h3 {
    color: var(--accent-color-green);
    border-left-color: var(--accent-color-yellow);
    /* This will apply to the cartouche's left border */
}

.controls-group.alt-pattern h3::after {
    /* The decorative element for h3 */
    background-color: var(--accent-color-blue);
    /* Color of the ::after shape */
}


.controls-group.alt-pattern-2 {
    background-color: var(--accent-color-teal);
    background-image: none;
    border: 4px solid var(--memphis-black);
}

.controls-group.alt-pattern-2 h3 {
    color: var(--memphis-yellow);
    border-left-color: var(--memphis-yellow);
}

.controls-group.alt-pattern-2 h3::after {
    background-color: var(--memphis-red);
}

/* Text inside alt-pattern-2 needs to be readable on teal background */
/* Labels inside this group will have their own white cartouche, so this is for p tags primarily */
.controls-group.alt-pattern-2 p {
    color: var(--memphis-white);
    text-shadow: 1px 1px 0 var(--memphis-black);
}

/* Labels in .alt-pattern-2 will get their own white cartouche via the global label style */


.controls-group::before {
    content: "";
    position: absolute;
    right: -18px;
    top: 20px;
    width: 35px;
    height: 35px;
    background-color: var(--accent-color-yellow);
    border: 4px solid var(--border-color);
    transform: rotate(-15deg);
    z-index: -1;
    /* Behind the control group */
}

.controls-group::after {
    content: "";
    position: absolute;
    left: -15px;
    bottom: -15px;
    width: 60px;
    height: 25px;
    background-color: var(--accent-color-blue);
    border: 3px solid var(--border-color);
    clip-path: polygon(0 0, 100% 0, 80% 100%, 20% 100%);
    z-index: -1;
    /* Behind the control group */
}

/* .controls-group h3 is styled above with cartouches */

.controls-group p {
    font-size: 0.9em;
    color: var(--text-color);
    margin-top: -0.5rem;
    margin-bottom: 1.2rem;
    line-height: 1.5;
    position: relative;
    z-index: 1;
    background-color: rgba(255, 255, 255, 0.8);
    padding: 0.5rem;
    /* width: 100%; */
    /* word-wrap: anywhere; */

}

.controls-group .info-text {
    font-size: 0.85em;
    margin-top: 10px;
    margin-bottom: 0;
    color: var(--text-color);
    opacity: 0.9;
    font-weight: 600;
    background-color: rgba(255, 255, 255, 0.81);
}

.CodeMirror {
    border: 5px solid var(--border-color);
    height: 70vh;
    width: 50vw;
    /* Fills the .column:first-child */
    font-family: var(--font-family-monospace);
    font-size: 15px;
    line-height: 1.7;
    border-radius: var(--border-radius-sharp);
    background-color: var(--memphis-white);
    box-shadow: var(--shadow-strong);
}

.CodeMirror-focused {
    border-color: var(--accent-color-pink);
    box-shadow: 0 0 0 4px rgba(233, 30, 99, 0.3), var(--shadow-strong);
}

.cm-keyword {
    color: var(--memphis-red);
    font-weight: bold;
}

.cm-variable-2 {
    color: var(--memphis-deep-blue);
}

.cm-variable-3 {
    color: var(--memphis-orange);
}

.cm-number {
    color: var(--memphis-purple);
}

.cm-string {
    color: var(--memphis-green);
}

.cm-comment {
    color: var(--memphis-dark-gray);
    font-style: italic;
}

.cm-operator {
    color: var(--memphis-pink);
    font-weight: bold;
}

.cm-property {
    color: var(--memphis-teal);
}


#assetPreviews {
    display: flex;
    flex-direction: column;
    gap: 30px;
}

#assetPreviews canvas {
    border: 4px solid var(--border-color);
    image-rendering: pixelated;
    cursor: pointer;
    background-color: var(--memphis-white);
    margin-top: 8px;
    border-radius: var(--border-radius-sharp);
    box-shadow: var(--shadow-subtle);
}

#assetPreviews .asset-preview-item {
    margin-bottom: 0;
    position: relative;
    padding: 10px;
    background-color: rgba(255, 255, 255, 0.6);
    /* Semi-transparent white to lift from parent pattern */
    border-radius: var(--border-radius-slight);
    z-index: 1;
    /* Above control group pattern */
}

#assetPreviews .asset-preview-item::after {
    content: "";
    position: absolute;
    bottom: -8px;
    right: -8px;
    width: 20px;
    height: 20px;
    background-color: var(--accent-color-yellow);
    border: 3px solid var(--border-color);
    border-radius: 50%;
    z-index: -1;
    /* Behind the item but above parent pattern if item has z-index */
}

/* Label inside asset-preview-item will get global label cartouche style */
#assetPreviews .asset-preview-item label {
    font-weight: 900;
    font-size: 1em;
    margin-bottom: 8px;
    display: block;
    color: var(--accent-color-blue) !important;
    width: max-content;

}


#assetPreviews canvas.drop-target-active {
    outline: 4px dashed var(--primary-color);
    outline-offset: -4px;
    background-color: #FFCDD2;
}

.env-control-row {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
    position: relative;
    padding: 5px;
    z-index: 1;
    /* Ensure content is above parent pattern */
}

.env-control-row::before {
    content: "";
    position: absolute;
    left: -10px;
    top: 50%;
    transform: translateY(-50%);
    width: 8px;
    height: 70%;
    background-color: var(--accent-color-green);
    border: 2px solid var(--border-color);
}

/* .env-control-row label is handled by global label cartouche style */

.env-control-row .real-time-value {
    font-family: var(--font-family-monospace);
    background-color: var(--accent-color-yellow);
    color: var(--text-color);
    padding: 0.5rem 0.7rem;
    border-radius: var(--border-radius-sharp);
    min-width: 40px;
    text-align: center;
    font-size: 0.9em;
    border: 3px solid var(--border-color);
    box-shadow: var(--shadow-subtle);
}

.env-control-row input[type="number"] {
    width: 70px;
    padding: 0.5rem 0.7rem;
}

.env-control-row button {
    padding: 0.4rem 0.8rem;
    font-size: 0.9em;
    min-width: 80px;
}

.script-mgmt-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
    position: relative;
    z-index: 1;
    /* Ensure content is above parent pattern */
}

/* .script-mgmt-row label is handled by global label cartouche style */

.script-mgmt-row select,
.script-mgmt-row input[type="text"] {
    flex-grow: 1;
    min-width: 150px;
    font-family: var(--font-family-monospace);
    /* Ensure monospace for User ID */
}

#scriptMgmtStatus {
    font-size: 0.9em;
    font-weight: 700;
    margin: 12px 0 0 0;
    min-height: 1.5em;
    padding: 8px 12px;
    border-radius: var(--border-radius-sharp);
    text-align: center;
    position: relative;
    z-index: 1;
}

#scriptMgmtStatus[style*="color: red;"],
#scriptMgmtStatus.error-active {
    background-color: var(--error-color-bg);
    color: var(--error-color-fg) !important;
    border: 3px solid var(--border-color);
    text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.3);
}

#scriptMgmtStatus[style*="color: green;"],
#scriptMgmtStatus.success-active {
    background-color: var(--accent-color-green);
    color: var(--text-color-light) !important;
    border: 3px solid var(--border-color);
    text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.3);
}

/* Highlight animation for script name input when needed */
@keyframes highlight-pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(255, 235, 59, 0.7);
    }

    70% {
        box-shadow: 0 0 0 10px rgba(255, 235, 59, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(255, 235, 59, 0);
    }
}

.highlight-input {
    animation: highlight-pulse 1.5s infinite;
    border-color: var(--accent-color-yellow) !important;
    background-color: rgba(255, 235, 59, 0.2) !important;
}

#deviceScriptListContainer {
    max-height: 220px;
    overflow-y: auto;
    border: 4px solid var(--border-color-light);
    padding: 15px;
    border-radius: var(--border-radius-sharp);
    background-color: rgba(255, 255, 255, 0.8);
    /* More opaque for better readability over patterns */
    position: relative;
    z-index: 1;
}

#deviceScriptListContainer div {
    margin-bottom: 8px;
    display: flex;
    align-items: center;
}

#deviceScriptListContainer input[type="checkbox"] {
    margin-right: 12px;
    accent-color: var(--accent-color-pink);
    transform: scale(1.4);
    cursor: pointer;
    /* border: 2px solid var(--border-color); // Native styling usually sufficient with accent-color */
}

/* #deviceScriptListContainer label is handled by global label cartouche style */
/* However, we might want to ensure it doesn't get a cartouche if it looks too busy here */
#deviceScriptListContainer .plain-label {
    /* Add this class in HTML if needed */
    background-color: transparent !important;
    color: var(--text-color) !important;
    text-shadow: none !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
    font-weight: 600;
    /* Keep it distinct */
}


.inline-flex-center {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    position: relative;
    z-index: 1;
}

/* .inline-flex-center label is handled by global label cartouche style */

.inline-flex-center input[type="checkbox"] {
    accent-color: var(--primary-color);
    transform: scale(1.3);
    /* padding: 6rem; */
    /* background-color: var(--primary-color); */
    margin-bottom: 2rem;

}

body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 12px;
    background: repeating-linear-gradient(45deg,
            var(--memphis-yellow),
            var(--memphis-yellow) 15px,
            var(--memphis-black) 15px,
            var(--memphis-black) 30px,
            var(--memphis-pink) 30px,
            var(--memphis-pink) 45px,
            var(--memphis-black) 45px,
            var(--memphis-black) 60px,
            var(--memphis-teal) 60px,
            var(--memphis-teal) 75px,
            var(--memphis-black) 75px,
            var(--memphis-black) 90px);
    z-index: 1000;
    /* Above everything else */
    border-bottom: 4px solid var(--memphis-black);
}

@media (max-width: 1200px) {
    body {
        flex-direction: column;
        gap: 35px;
        padding: 20px;
        padding-top: 32px;
        /* Account for fixed body::before height + border */
    }

    .column:first-child {
        flex-basis: auto;
        /* Reset flex-basis */
        width: 100%;
        /* Make it full width */
    }

    .column:last-child {
        max-width: 100%;
        width: 100%;
    }

    .CodeMirror {
        width: 100%;
        height: 60vh;
    }

    #errorLog {
        width: 100%;
        /* Full width on smaller screens */
    }

    h2 {
        font-size: 2rem;
        padding: 0.4rem 0.8rem;
    }

    h2::after {
        height: 5px;
        margin-top: 0.4rem;
    }

    h3 {
        font-size: 1.4rem;
        padding: 0.4rem 0.8rem;
    }

    h3::after {
        width: 30px;
        height: 6px;
        right: -15px;
    }
}

/* Confirmation Dialog Styles */
.confirmation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.confirmation-dialog {
    background-color: var(--bg-color-alt);
    border: 3px solid var(--border-color);
    border-radius: var(--border-radius-slight);
    box-shadow: var(--shadow-strong);
    padding: 20px;
    max-width: 450px;
    width: 90%;
    text-align: center;
    position: relative;
}

.confirmation-dialog::before {
    content: "";
    position: absolute;
    top: -10px;
    right: -10px;
    width: 20px;
    height: 20px;
    background-color: var(--accent-color-yellow);
    border: 2px solid var(--border-color);
    transform: rotate(45deg);
    z-index: -1;
}

.confirmation-dialog p {
    margin-bottom: 20px;
    font-size: 1rem;
}

.confirmation-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    body::before {
        height: 10px;
        background: repeating-linear-gradient(45deg,
                var(--memphis-yellow), var(--memphis-yellow) 10px,
                var(--memphis-black) 10px, var(--memphis-black) 20px,
                var(--memphis-pink) 20px, var(--memphis-pink) 30px);
        border-bottom-width: 3px;
    }

    body {
        padding-top: 28px;
        /* Account for fixed body::before height + border */
    }

    h2 {
        font-size: 1.8rem;
        padding: 0.3rem 0.6rem;
    }

    h2::after {
        height: 4px;
        margin-top: 0.3rem;
    }

    h3 {
        font-size: 1.3rem;
        padding: 0.3rem 0.6rem;
    }

    h3::after {
        width: 30px;
        height: 6px;
        right: -12px;
    }

    label {
        padding: 4px 8px;
        font-size: 0.85rem;
    }

    button {
        padding: 0.7rem 1.2rem;
        font-size: 0.9rem;
    }

    input[type="number"],
    input[type="text"],
    select {
        padding: 0.7rem 0.9rem;
        font-size: 0.9rem;
    }

    .controls-group {
        padding: 15px;
    }

    .controls-group::before {
        width: 25px;
        height: 25px;
        right: -12px;
    }

    .controls-group::after {
        width: 40px;
        height: 20px;
        left: -10px;
        bottom: -10px;
    }

}

/* Run button specific styles */
button#runButton {
    width: 80%;
    align-self: center;
    background-color: var(--accent-color-green);
    position: relative;
    overflow: hidden;
    color: var(--accent-color-green);
}

/* Add Memphis geometric shapes behind run button */
button#runButton::before {
    content: "";
    position: absolute;
    top: -5px;
    left: -5px;
    width: 20px;
    height: 20px;
    background-color: var(--accent-color-yellow);
    border: 2px solid var(--border-color);
    transform: rotate(45deg);
    z-index: -1;
}

button#runButton::after {
    content: "";
    position: absolute;
    bottom: -5px;
    right: -5px;
    width: 30px;
    height: 10px;
    background-color: var(--accent-color-blue);
    border: 2px solid var(--border-color);
    z-index: -1;
}

/* Add static zigzag pattern to run button */
button#runButton {
    background-image:
        linear-gradient(45deg,
            var(--accent-color-green) 25%,
            var(--accent-color-yellow) 25%,
            var(--accent-color-yellow) 50%,
            var(--accent-color-green) 50%,
            var(--accent-color-green) 75%,
            var(--accent-color-yellow) 75%,
            var(--accent-color-yellow) 100%);
    background-size: 20px 20px;
    /* Animation removed */
}

/* Override the span styling for the run button to add yellow background for legibility */
button#runButton span {
    position: relative;
    z-index: 1;
    background-color: var(--accent-color-yellow);
    padding: 5px 10px;
    border-radius: var(--border-radius-soft);
    border: 1px solid var(--border-color);
    font-weight: 700;
}