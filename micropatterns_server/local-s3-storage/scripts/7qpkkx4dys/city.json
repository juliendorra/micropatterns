{
  "id": "city",
  "name": "City",
  "content": "# City Map Generator - MicroPatterns DSL\n# Creates a procedural city layout using 8 different 20x20 tile patterns\n# Adapts to any screen size using $WIDTH and $HEIGHT\n\n# Define 8 city tile patterns (20x20 each)\n\n# Pattern 1: Empty lot/grass\nDEFINE PATTERN NAME=\"empty\" WIDTH=20 HEIGHT=20 DATA=\"00000000000000000000000100000001000000000010000100000000000100010000000000000001000100000000000000010001000000000000000100010000000000000001000100000000000000010001000000000000000100010000000000000001000100000000000000010001000000000000000100010000000000000001000100000000000000010001000000000000000100010000000000000001000100000000000000010001000000000000000000000000000000000000\"\n\n# Pattern 2: Building block (solid)\nDEFINE PATTERN NAME=\"building\" WIDTH=20 HEIGHT=20 DATA=\"11111111111111111111100100100100100100110010010010010010011001001001001001001100100100100100100110010010010010010011001001001001001001100100100100100100110010010010010010011001001001001001001100100100100100100110010010010010010011001001001001001001100100100100100100110010010010010010011001001001001001001100100100100100100111111111111111111111\"\n\n# Pattern 3: Horizontal road\nDEFINE PATTERN NAME=\"road_h\" WIDTH=20 HEIGHT=20 DATA=\"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111100000000000000000000011111111111111111110000000000000000000011111111111111111111000000000000000000001111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"\n\n# Pattern 4: Vertical road\nDEFINE PATTERN NAME=\"road_v\" WIDTH=20 HEIGHT=20 DATA=\"00000111100000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111\"\n\n# Pattern 5: Intersection (cross roads)\nDEFINE PATTERN NAME=\"intersection\" WIDTH=20 HEIGHT=20 DATA=\"00000111100000111100000011110000001111000000111100000011110000001111000000111100000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111000000111100000011110000001111\"\n\n# Pattern 6: Park/green space\nDEFINE PATTERN NAME=\"park\" WIDTH=20 HEIGHT=20 DATA=\"00010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100010001\"\n\n# Pattern 7: Dense building area\nDEFINE PATTERN NAME=\"dense\" WIDTH=20 HEIGHT=20 DATA=\"11111111110111111111111111111011111111111111111101111111111111111110111111111111111111011111111111111111101111111111111111110111111111111111111011111111111111111101111111111111111110111111111111111111011111111111111111101111111111111111110111111111111111111011111111111111111101111111111111111110111111111111111111011111111\"\n\n# Pattern 8: Commercial strip\nDEFINE PATTERN NAME=\"commercial\" WIDTH=20 HEIGHT=20 DATA=\"11110000111100001111000011110000111100000000000000000000000000000000000011110000111100001111000011110000111100000000000000000000000000000000000011110000111100001111000011110000111100000000000000000000000000000000000011110000111100001111000011110000111100000000000000000000000000000000000011110000111100001111000011110000\"\n\nVAR $scaling=4\n\n# Calculate grid dimensions (how many 20x20 scaled up tiles fit)\nVAR $grid_width = $WIDTH / 20 * $scaling\nVAR $grid_height = $HEIGHT / 20 *$scaling\n\n# Ensure minimum grid size\nIF $grid_width < 1 THEN\n    LET $grid_width = 1\nENDIF\nIF $grid_height < 1 THEN\n    LET $grid_height = 1\nENDIF\n\n# Variables for city generation with more randomness sources\nVAR $seed = $HOUR * 60 + $MINUTE + $COUNTER\nVAR $time_factor = $SECOND * 3 + $MINUTE / 10\nVAR $counter_mod = $COUNTER % 17\nVAR $x\nVAR $y\nVAR $tile_type\nVAR $pattern_choice\n\n# Fill background\nCOLOR NAME=WHITE\nFILL NAME=SOLID\nFILL_RECT X=0 Y=0 WIDTH=$WIDTH HEIGHT=$HEIGHT\n\n# Generate city grid\nREPEAT COUNT=$grid_height\n\n    LET $y = $INDEX\n    \n    REPEAT COUNT=$grid_width\n        LET $x = $INDEX\n        \n        # Generate pseudo-random tile type with multiple randomness sources\n        VAR $x_factor = $x * 13\n        VAR $y_factor = $y * 19\n        VAR $xy_cross = $x * $y * 7\n        VAR $time_influence = $time_factor * 23\n        VAR $counter_influence = $counter_mod * 31\n        VAR $random_sum = $x_factor + $y_factor + $xy_cross + $seed + $time_influence + $counter_influence\n        LET $tile_type = $random_sum % 100\n                \n        # Choose pattern based on tile_type value\n        IF $tile_type < 5 THEN\n            # empty lot\n            LET $pattern_choice = 1\n        ENDIF\n        \n        IF $tile_type >= 5 THEN\n            IF $tile_type < 25 THEN\n                # building\n                LET $pattern_choice = 2\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 25 THEN\n            IF $tile_type < 35 THEN\n                # horizontal road\n                LET $pattern_choice = 3\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 35 THEN\n            IF $tile_type < 45 THEN\n                # vertical road\n                LET $pattern_choice = 4\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 45 THEN\n            IF $tile_type < 50 THEN\n                # intersection\n                LET $pattern_choice = 5\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 50 THEN\n            IF $tile_type < 60 THEN\n                # park\n                LET $pattern_choice = 6\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 60 THEN\n            IF $tile_type < 80 THEN\n                # dense building\n                LET $pattern_choice = 7\n            ENDIF\n        ENDIF\n        \n        IF $tile_type >= 80 THEN\n            # commercial strip\n            LET $pattern_choice = 8\n        ENDIF\n        \n        # Calculate grid position (20x20 spacing)\n        VAR $pixel_x = $x * 20\n        VAR $pixel_y = $y * 20\n        \n        # Apply 4x scale \n        COLOR NAME=BLACK\n        SCALE FACTOR=$scaling\n\n        IF $pattern_choice == 1 THEN\n            DRAW NAME=\"empty\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 2 THEN\n            DRAW NAME=\"building\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 3 THEN\n            DRAW NAME=\"road_h\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 4 THEN\n            DRAW NAME=\"road_v\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 5 THEN\n            DRAW NAME=\"intersection\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 6 THEN\n            DRAW NAME=\"park\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 7 THEN\n            DRAW NAME=\"dense\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        IF $pattern_choice == 8 THEN\n            DRAW NAME=\"commercial\" X=$pixel_x Y=$pixel_y\n        ENDIF\n        \n        # Reset scale after drawing\n        RESET_TRANSFORMS\n        \n    ENDREPEAT\nENDREPEAT",
  "lastModified": "2025-05-24T10:14:25.737Z"
}